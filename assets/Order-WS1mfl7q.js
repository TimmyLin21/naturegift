import{a as O,x as P,y as T,z as q,A as N}from"./alertMixin-DyMZh6iB.js";import{l as A}from"./loadingMixin-CrgvWKu1.js";import{P as U}from"./Pagination-Bzx8p2PF.js";import{m as V,D as $}from"./DelModal-Bqwpp5m9.js";import{_ as v,c as l,a as u,o as i,b as e,f as g,v as f,t as n,F as y,r as _,G as j,w as m,g as c,d as p,h as R,j as E}from"./index-KAsS_BkG.js";const J={data(){return{cacheOrder:{imagesUrl:[],user:{}}}},props:{order:{type:Object,default(){return{imagesUrl:[],user:{}}}},isReadOnly:{type:Boolean,default:!1}},methods:{saveChange(){P(this.cacheOrder.id,this.cacheOrder).then(t=>{this.alert.msg=t.data.message,this.alert.state=!0,this.closeModal(),this.sendMsg(),this.sendRequest()}).catch(t=>{[this.alert.msg]=t.response.data.message,this.alert.state=!1,this.sendMsg()})},sendRequest(){this.$emit("send-request")}},watch:{order(){this.cacheOrder=this.order}},mixins:[V,O],emits:["send-request"]},L={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col relative"},F={class:"flex items-center justify-between p-4 border-b bg-primary rounded-t-lg"},z={class:"p-6 overflow-y-auto"},X={class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},G={class:"lg:col-span-5 col-span-12"},H={class:"space-y-4"},K={class:"grid grid-cols-12 gap-2 items-center"},Q={class:"col-span-9"},W={class:"grid grid-cols-12 gap-2 items-center"},Y={class:"col-span-9"},Z={class:"grid grid-cols-12 gap-2 items-center"},ee={class:"col-span-9"},se={class:"grid grid-cols-12 gap-2 items-center"},te={class:"col-span-9"},oe={class:"lg:col-span-7 col-span-12"},re={class:"w-full mb-6"},le={class:"border-b"},ie={class:"py-2"},ne={class:"border-b"},ae={class:"py-2"},de={class:"border-b"},ce={class:"py-2"},pe={key:0},he={key:1},ue={class:"border-b"},ge={class:"py-2"},me={key:0,class:"text-green-500"},fe={key:1,class:"text-gray-500"},ye={class:"border-b"},_e={class:"py-2"},be={class:"w-full mb-4"},xe={class:"py-2 font-normal text-left"},Oe={class:"py-2 text-center"},ve={class:"py-2 text-right"},we={class:"flex items-center pt-4 border-t"},Me=["checked"],ke={class:"font-bold cursor-pointer",for:"isPaidSwitch"},De={key:0,class:"text-green-500"},Ce={key:1,class:"text-gray-500"},Se={class:"p-4 border-t flex justify-end gap-2 bg-gray-50 rounded-b-lg"};function Be(t,s,b,w,o,a){return t.isModalOpen?(i(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 transition-opacity",onClick:s[8]||(s[8]=m((...r)=>t.closeModal&&t.closeModal(...r),["self"]))},[e("div",L,[e("div",F,[s[9]||(s[9]=e("h5",{class:"text-xl font-bold text-secondary"}," Edit Order ",-1)),e("button",{type:"button",class:"text-secondary hover:text-white text-2xl leading-none",onClick:s[0]||(s[0]=(...r)=>t.closeModal&&t.closeModal(...r)),"aria-label":"Close"}," Ã— ")]),e("div",z,[e("div",X,[e("div",G,[s[14]||(s[14]=e("h3",{class:"text-lg font-bold mb-4"},"Customer Info",-1)),e("div",H,[e("div",K,[s[10]||(s[10]=e("label",{for:"name",class:"col-span-3 font-bold"},"Name",-1)),e("div",Q,[g(e("input",{type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",id:"name","onUpdate:modelValue":s[1]||(s[1]=r=>o.cacheOrder.user.name=r)},null,512),[[f,o.cacheOrder.user.name]])])]),e("div",W,[s[11]||(s[11]=e("label",{for:"email",class:"col-span-3 font-bold"},"Email",-1)),e("div",Y,[g(e("input",{type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",id:"email","onUpdate:modelValue":s[2]||(s[2]=r=>o.cacheOrder.user.email=r)},null,512),[[f,o.cacheOrder.user.email]])])]),e("div",Z,[s[12]||(s[12]=e("label",{for:"tel",class:"col-span-3 font-bold"},"Phone",-1)),e("div",ee,[g(e("input",{type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",id:"tel","onUpdate:modelValue":s[3]||(s[3]=r=>o.cacheOrder.user.tel=r)},null,512),[[f,o.cacheOrder.user.tel]])])]),e("div",se,[s[13]||(s[13]=e("label",{for:"address",class:"col-span-3 font-bold"},"Address",-1)),e("div",te,[g(e("input",{type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",id:"address","onUpdate:modelValue":s[4]||(s[4]=r=>o.cacheOrder.user.address=r)},null,512),[[f,o.cacheOrder.user.address]])])])])]),e("div",oe,[s[20]||(s[20]=e("h3",{class:"text-lg font-bold mb-4"},"Order Detail",-1)),e("table",re,[e("tbody",null,[e("tr",le,[s[15]||(s[15]=e("th",{class:"py-2 w-[120px] whitespace-nowrap align-top"},"Tracking number",-1)),e("td",ie,n(o.cacheOrder.id),1)]),e("tr",ne,[s[16]||(s[16]=e("th",{class:"py-2 align-top"},"Ordered time",-1)),e("td",ae,n(t.$filters.date(o.cacheOrder.create_at)),1)]),e("tr",de,[s[17]||(s[17]=e("th",{class:"py-2 align-top"},"Paid time",-1)),e("td",ce,[o.cacheOrder.paid_date?(i(),l("span",pe,n(t.$filters.date(o.cacheOrder.paid_date)),1)):(i(),l("span",he," - "))])]),e("tr",ue,[s[18]||(s[18]=e("th",{class:"py-2 align-top"},"Paid statement",-1)),e("td",ge,[o.cacheOrder.is_paid?(i(),l("strong",me,"Paid")):(i(),l("span",fe,"Unpaid"))])]),e("tr",ye,[s[19]||(s[19]=e("th",{class:"py-2 align-top"},"Total",-1)),e("td",_e,n(t.$filters.currency(o.cacheOrder.total)),1)])])]),s[21]||(s[21]=e("h3",{class:"text-lg font-bold mb-4"},"Order items",-1)),e("table",be,[e("tbody",null,[(i(!0),l(y,null,_(o.cacheOrder.products,r=>(i(),l("tr",{key:r.id,class:"border-b last:border-0"},[e("th",xe,n(r.product.title),1),e("td",Oe,n(r.product.unit)+" x "+n(r.qty),1),e("td",ve,n(t.$filters.currency(r.final_total)),1)]))),128))])]),e("div",we,[g(e("input",{class:"mr-2 h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=r=>o.cacheOrder.is_paid=r),"true-value":!0,"false-value":!1,id:"isPaidSwitch",checked:o.cacheOrder.is_paid},null,8,Me),[[j,o.cacheOrder.is_paid]]),e("label",ke,[o.cacheOrder.is_paid?(i(),l("span",De,"Paid")):(i(),l("span",Ce,"Unpaid"))])])])])]),e("div",Se,[e("button",{type:"button",class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors",onClick:s[6]||(s[6]=(...r)=>t.closeModal&&t.closeModal(...r))}," Close "),b.isReadOnly?u("",!0):(i(),l("button",{key:0,type:"button",class:"px-4 py-2 bg-primary text-secondary font-bold rounded hover:bg-opacity-90 transition-colors",onClick:s[7]||(s[7]=(...r)=>a.saveChange&&a.saveChange(...r))}," Save changes "))])])])):u("",!0)}const Ie=v(J,[["render",Be]]),Pe={data(){return{orders:"",cacheOrder:{imagesUrl:[]},isDemo:!1}},components:{Pagination:U,DelModal:$,OrderModal:Ie},methods:{getOrders(t){if(this.isDemo){this.orders={orders:[{id:"-Mw_1234567890",create_at:Math.floor(new Date().getTime()/1e3),is_paid:!0,total:1500,products:[{id:"demo-prod-1",product:{title:"Demo Spice",unit:"bottle"},qty:3}],user:{email:"user@demo.com"}},{id:"-Mw_0987654321",create_at:Math.floor(new Date().getTime()/1e3)-1e5,is_paid:!1,total:800,products:[{id:"demo-prod-2",product:{title:"Demo Beans",unit:"bag"},qty:1}],user:{email:"user2@demo.com"}}],pagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1}};return}this.sendLoadingState(!0),N(t).then(s=>{this.sendLoadingState(!1),this.orders=s.data}).catch(()=>{this.sendLoadingState(!1),this.alert.msg="Fail to get the orders",this.alert.state=!1,this.sendMsg()})},delAllOrders(){this.sendLoadingState(!0),q().then(t=>{this.alert.msg=t.data.message,this.alert.state=!0,this.$refs.delModal.closeModal(),this.sendMsg(),this.getOrders()}).catch(t=>{this.sendLoadingState(!1),this.alert.msg=t.response.data.message,this.alert.state=!1,this.sendMsg()})},delOrder(){T(this.cacheOrder.id).then(t=>{this.alert.msg=t.data.message,this.alert.state=!0,this.$refs.delModal.closeModal(),this.sendMsg(),this.getOrders()}).catch(t=>{[this.alert.msg]=t.response.data.message,this.alert.state=!1,this.$refs.delModal.closeModal(),this.sendMsg()})},modalToggle(t,s){t==="edit"?(this.cacheOrder=JSON.parse(JSON.stringify(s)),this.$refs.orderModal.openModal()):t==="view"?(this.cacheOrder=JSON.parse(JSON.stringify(s)),this.$refs.orderModal.openModal()):t==="del"?(this.cacheOrder=JSON.parse(JSON.stringify(s)),this.$refs.delModal.openModal()):t==="delAll"&&(this.cacheOrder={},this.$refs.delModal.openModal())}},created(){this.isDemo=localStorage.getItem("isDemo")==="true",this.getOrders(),this.$emitter.on("send-request",t=>{this.getOrders(t)})},mixins:[O,A]},Te={class:"bg-white w-full min-h-screen"},qe={class:"container mx-auto px-4 py-8"},Ne={class:"flex justify-end mb-6"},Ae=["disabled"],Ue={class:"overflow-x-auto bg-white rounded-lg shadow"},Ve={class:"w-full table-auto text-center"},$e={class:"text-gray-600 text-sm font-light"},je={class:"py-3 px-6"},Re={class:"py-3 px-6 whitespace-nowrap"},Ee={class:"py-3 px-6 text-left"},Je={class:"list-disc list-inside"},Le={class:"py-3 px-6 font-bold text-secondary"},Fe={key:0,class:"py-3 px-6"},ze={class:"text-green-500 font-bold"},Xe={key:1,class:"py-3 px-6"},Ge={class:"text-gray-400"},He={class:"py-3 px-6"},Ke={class:"flex item-center justify-center gap-4"},Qe=["onClick"],We=["onClick"],Ye=["onClick"],Ze={class:"mt-6 flex justify-center"};function es(t,s,b,w,o,a){var x;const r=p("BIconCheckCircle"),M=p("BIconXCircle"),k=p("BIconPen"),D=p("BIconTrash"),C=p("BIconEyeFill"),S=p("Pagination"),B=p("DelModal"),I=p("OrderModal");return i(),l(y,null,[e("main",Te,[e("div",qe,[e("div",Ne,[o.isDemo?u("",!0):(i(),l("button",{key:0,type:"button",class:"inline-block bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-all duration-300 font-bold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:s[0]||(s[0]=m(d=>a.modalToggle("delAll"),["prevent"])),disabled:((x=o.orders.orders)==null?void 0:x.length)===0}," Delete all orders ",8,Ae))]),e("div",Ue,[e("table",Ve,[s[1]||(s[1]=e("thead",{class:"bg-gray-100 text-gray-600 uppercase text-sm leading-normal"},[e("tr",null,[e("th",{scope:"col",class:"py-3 px-6"}," Date "),e("th",{scope:"col",class:"py-3 px-6"}," Tracking Number "),e("th",{scope:"col",class:"py-3 px-6"}," Items "),e("th",{scope:"col",class:"py-3 px-6"}," Price "),e("th",{scope:"col",class:"py-3 px-6"}," Payment status "),e("th",{scope:"col",class:"py-3 px-6"}," Edit order ")])],-1)),e("tbody",$e,[(i(!0),l(y,null,_(o.orders.orders,d=>(i(),l("tr",{key:d.id,class:"border-b border-gray-200 hover:bg-gray-50 transition-colors"},[e("td",je,n(t.$filters.date(d.create_at)),1),e("td",Re,n(d.id),1),e("td",Ee,[e("ul",Je,[(i(!0),l(y,null,_(d.products,h=>(i(),l("li",{class:"whitespace-nowrap",key:h.id},n(h.product.title)+" "+n(h.product.unit)+" x "+n(h.qty),1))),128))])]),e("td",Le,n(d.total),1),d.is_paid?(i(),l("td",Fe,[e("span",ze,[c(r,{class:"w-5 h-5 inline"})])])):(i(),l("td",Xe,[e("span",Ge,[c(M,{class:"w-5 h-5 inline"})])])),e("td",He,[e("div",Ke,[o.isDemo?u("",!0):(i(),l("button",{key:0,class:"transform hover:text-secondary hover:scale-110 transition-transform duration-300",onClick:m(h=>a.modalToggle("edit",d),["prevent"]),title:"Edit"},[c(k,{class:"w-5 h-5"})],8,Qe)),o.isDemo?u("",!0):(i(),l("button",{key:1,class:"transform hover:text-red-500 hover:scale-110 transition-transform duration-300",onClick:m(h=>a.modalToggle("del",d),["prevent"]),title:"Delete"},[c(D,{class:"w-5 h-5"})],8,We)),o.isDemo?(i(),l("button",{key:2,class:"transform hover:text-secondary hover:scale-110 transition-transform duration-300",onClick:m(h=>a.modalToggle("view",d),["prevent"]),title:"View Details"},[c(C,{class:"w-5 h-5"})],8,Ye)):u("",!0)])])]))),128))])])]),e("div",Ze,[c(S,{pagination:o.orders.pagination,onSendRequest:a.getOrders},null,8,["pagination","onSendRequest"])])])]),c(B,{ref:"delModal",onDelItem:a.delOrder,onDelAll:a.delAllOrders,item:o.cacheOrder},{default:R(()=>[...s[2]||(s[2]=[E(" Order ",-1)])]),_:1},8,["onDelItem","onDelAll","item"]),c(I,{ref:"orderModal",onSendRequest:a.getOrders,order:o.cacheOrder,"is-read-only":o.isDemo},null,8,["onSendRequest","order","is-read-only"])],64)}const is=v(Pe,[["render",es]]);export{is as default};
